<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <title>Server API | Game Frame</title>

    
    
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="./css/syntax.css">

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>

    <nav class="clearfix">
      
      
      



  
  
    

    	
        
          <a href="./">Home</a>
    	  

    	

    
  
    

    	
        
          <a href="./android.html">Android SDK</a>
    	  
    	

    
  
    

    	
        
          <a href="./api.html" class="active">Server API</a>
    	  
    	

    
  





    </nav>

    <div class="wrapper">

      <header class="main">
        <hgroup>
          <h1 class="title"><a href="./">Game Frame</a></h1>
          
          <h2>multiplayer board/card game framework</h2>
          
          <div id="toc"></div>
        </hgroup>

      </header>
      <section class="main">
        <h2 id="toc_0">Authentication Tokens</h2>

<p><strong>Route:</strong> <em>GET /csrfToken</em></p>

<p><strong>Input:</strong> None</p>

<p><strong>Output:</strong></p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="p">{</span>
  <span class="s2">&quot;_csrf&quot;</span><span class="o">:</span> <span class="s2">&quot;5T0pzcHqfyC8b403okqnZDdtIfA10VEBOx64U=&quot;</span> 
<span class="p">}</span>
</code></pre></div>
<p><strong>Notes:</strong></p>

<p>Before doing anything else with the Game Frame server API, the client must request a CSRF (cross-site request forgery) token. This is a safety measure to protect our users from malicious websites. Every request sent to the server that modifies the state of the server (i.e. POST, PUT, DELETE, etc. requests) requires that this CSRF token also be sent. There are two methods of including the CSRF token:</p>

<ol>
<li>Include the token as a POST parameter titled &quot;_csrf&quot; (same format as the output above).</li>
<li>Include the token as a request header titled &quot;X-CSRF-Token&quot;.</li>
</ol>

<p>In the other API calls on this page, the CSRF token is included as a parameter as a reminder of its necessity, but remember that it can be sent as a header alternatively. For more information, see <a href="http://sailsjs.org/#!documentation/config.csrf">here</a>.</p>

<h2 id="toc_1">User Registration</h2>

<p><strong>Route:</strong> <em>POST /auth/local/register</em></p>

<p><strong>Input:</strong></p>

<table><thead>
<tr>
<th>Keys</th>
<th>Values</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>the user&#39;s unique name</td>
</tr>
<tr>
<td>email</td>
<td>the user&#39;s email address</td>
</tr>
<tr>
<td>password</td>
<td>the user&#39;s password</td>
</tr>
<tr>
<td>_csrf</td>
<td>authentication token (see Authentication Tokens section</td>
</tr>
</tbody></table>

<p><strong>Output:</strong></p>

<p>Success</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">status</span><span class="o">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
  <span class="nx">message</span><span class="o">:</span> <span class="kc">null</span> 
<span class="p">}</span>
</code></pre></div>
<p>Error</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">status</span><span class="o">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
  <span class="nx">message</span><span class="o">:</span> <span class="s2">&quot;Password must be at least 8 characters long.&quot;</span> 
<span class="p">}</span>
</code></pre></div>
<h2 id="toc_2">User Login</h2>

<p><strong>Route:</strong> <em>POST /auth/local</em></p>

<p><strong>Input:</strong></p>

<table><thead>
<tr>
<th>Keys</th>
<th>Values</th>
</tr>
</thead><tbody>
<tr>
<td>identifier</td>
<td>the user&#39;s username OR email address</td>
</tr>
<tr>
<td>password</td>
<td>the user&#39;s password</td>
</tr>
<tr>
<td>_csrf</td>
<td>authentication token (see Authentication Tokens section)</td>
</tr>
</tbody></table>

<p><strong>Output:</strong></p>

<p>Success</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">status</span><span class="o">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
  <span class="nx">message</span><span class="o">:</span> <span class="kc">null</span> 
<span class="p">}</span>
</code></pre></div>
<p>Error</p>
<div class="highlight"><pre><code class="js language-js" data-lang="js"><span class="p">{</span>
  <span class="nx">status</span><span class="o">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
  <span class="nx">message</span><span class="o">:</span> <span class="s2">&quot;Incorrect password.&quot;</span> 
<span class="p">}</span>
</code></pre></div>
      </section>
      <aside>
        <ul>
          <li class="contact"><a href="mailto:"></a></li>
        </ul>
      </aside>
      <footer class="main">
        <p>
          <small>Themed using <a href="http://sdb.github.com/jb-theme-ghminimal/">ghminimal</a>, based on <a href="http://github.com/orderedlist/minimal/">minimal</a>. Powered by <a href="http://github.com/mojombo/jekyll">Jekyll</a> and <a href="http://pages.github.com/">GitHub Pages</a>.</small>
        </p>
      </footer>
    </div>

    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script src="./js/scale.fix.js"></script>
    <script src="./js/table-of-contents.js"></script>
  </body>
</html>
